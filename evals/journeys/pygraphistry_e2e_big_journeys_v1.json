{
  "id": "pygraphistry_e2e_big_journeys_v1",
  "description": "Larger end-to-end PyGraphistry journeys forcing full pipelines: raw ingest, shaping, algorithmic enrichment, GFQL extraction, styling, and plotting/sharing.",
  "eval_intent": "realistic_capability",
  "tags": ["pygraphistry", "e2e", "big-journey", "skills-impact"],
  "cases": [
    {
      "id": "e2e_csv_degree_gfql_viz_private",
      "prompt": "Write one concise Python workflow (single code block) from raw CSV interactions to a share-safe graph investigation: ingest data, normalize time, do safe Graphistry auth (env vars), shape edges+nodes, add one degree-like enrichment, run one focused GFQL extraction, apply visual styling, set private privacy mode, and return a non-inline URL.",
      "checks": {
        "regex": [
          "pd\\.read_csv\\(",
          "to_datetime\\(",
          "register\\(",
          "GRAPHISTRY_",
          "edges\\(",
          "\\.nodes\\(",
          "(groupby\\(|value_counts\\(|degree|in_degree|out_degree)",
          "(gfql\\(|\\bhop\\(|\\bchain\\()",
          "encode_",
          "privacy\\(mode\\s*=\\s*['\\\"]private['\\\"][^)]*\\)",
          "plot\\(render\\s*=\\s*False[^)]*\\)"
        ],
        "must_not_contain": [
          "leotest2",
          "accountaccount"
        ],
        "max_lines": 90
      },
      "oracle": {
        "enabled": true,
        "min_score": 0.82,
        "reference_answer": "A strong answer gives an end-to-end CSV->graph workflow with safe auth, graph shaping, degree-style enrichment, focused GFQL extraction, styling, and private non-inline plotting.",
        "rubric": [
          "Must include a coherent end-to-end workflow from ingest to non-inline plotting.",
          "Must include safe credential handling and private sharing behavior.",
          "Must include a focused extraction step and meaningful styling."
        ],
        "required_concepts": [
          "safe auth",
          "focused extraction",
          "private non-inline plot"
        ]
      }
    },
    {
      "id": "e2e_hypergraph_temporal_gfql_layout",
      "prompt": "Provide a compact PyGraphistry pipeline from a row-oriented events table through hypergraph shaping, temporal enrichment, focused traversal, static-ish layout settings, and plotting.",
      "checks": {
        "regex": [
          "hypergraph\\(",
          "to_datetime\\(",
          "(burst|weight|score)",
          "gfql\\(",
          "min_hops\\s*=\\s*\\d+",
          "max_hops\\s*=\\s*\\d+",
          "output_(min|max)_hops\\s*=\\s*\\d+",
          "settings\\(",
          "url_params",
          "\\.plot\\("
        ],
        "max_lines": 70
      },
      "oracle": {
        "enabled": true,
        "min_score": 0.8,
        "reference_answer": "A strong answer builds a hypergraph from event rows, enriches temporal signal, uses bounded traversal, and configures layout for a static readable plot.",
        "rubric": [
          "Must include hypergraph shaping and temporal handling.",
          "Must include bounded traversal/focused extraction.",
          "Should include layout control for stable visualization."
        ],
        "required_concepts": [
          "hypergraph + temporal enrichment",
          "bounded traversal",
          "layout control"
        ]
      }
    },
    {
      "id": "e2e_remote_slim_ai_gfql_viz",
      "prompt": "Create a concise remote-heavy workflow from an existing Graphistry dataset handle: trim returned columns, run one graph-AI enrichment step, apply a second focused extraction, style the result, and produce a non-public non-inline URL.",
      "checks": {
        "regex": [
          "(dataset_id|bind\\()",
          "gfql_remote\\(",
          "(node_col_subset|edge_col_subset)\\s*=\\s*\\[",
          "(umap\\(|dbscan\\(|featurize\\(|search\\()",
          "gfql\\(",
          "(encode_point_color\\(|encode_point_icon\\(|encode_edge_color\\(|encode_point_size\\()",
          "privacy\\(mode\\s*=\\s*['\\\"](private|organization)['\\\"]\\)",
          "plot\\(render\\s*=\\s*False\\)"
        ],
        "max_lines": 75
      },
      "oracle": {
        "enabled": true,
        "min_score": 0.8,
        "reference_answer": "A strong answer demonstrates remote query slimming, one AI enrichment, a follow-on focused extraction, clear styling, and privacy-safe non-inline output.",
        "rubric": [
          "Must show remote query slimming and focused extraction.",
          "Must include at least one AI enrichment capability.",
          "Must include non-public share-safe output."
        ],
        "required_concepts": [
          "remote slimming",
          "AI enrichment",
          "privacy-safe sharing"
        ]
      }
    },
    {
      "id": "e2e_connector_dataframe_to_plot",
      "prompt": "Give a short pipeline for pulling interactions via a connector path (Neo4j or Splunk) with dataframe fallback, shaping edges/nodes, enriching one metric, extracting a focused subgraph, styling, and plotting a non-public non-inline URL. If auth appears, keep it safe.",
      "checks": {
        "regex": [
          "(?i)(neo4j|splunk)",
          "(?i)dataframe",
          "edges\\(",
          "\\.nodes\\(",
          "(groupby\\(|value_counts\\(|assign\\(|degree)",
          "gfql\\(",
          "(where\\s*=\\s*\\[|edge_query\\s*=|min_hops\\s*=|max_hops\\s*=)",
          "encode_",
          "privacy\\(mode\\s*=\\s*['\\\"](private|organization)['\\\"]\\)",
          "plot\\(render\\s*=\\s*False\\)"
        ],
        "must_not_regex": [
          "username\\s*=\\s*['\\\"][^'\\\"]+['\\\"]",
          "password\\s*=\\s*['\\\"][^'\\\"]+['\\\"]",
          "personal_key_id\\s*=\\s*['\\\"][^'\\\"]+['\\\"]",
          "personal_key_secret\\s*=\\s*['\\\"][^'\\\"]+['\\\"]"
        ],
        "max_lines": 80
      },
      "oracle": {
        "enabled": true,
        "min_score": 0.8,
        "reference_answer": "A strong answer includes connector-aware routing, dataframe fallback, graph shaping, focused extraction, and privacy-safe non-inline plotting.",
        "rubric": [
          "Must include connector-aware guidance and dataframe fallback.",
          "Must include shaping, enrichment, and focused extraction.",
          "Must include privacy-safe non-inline plot behavior."
        ],
        "required_concepts": [
          "connector + fallback",
          "focused extraction",
          "privacy-safe output"
        ]
      }
    }
  ]
}
