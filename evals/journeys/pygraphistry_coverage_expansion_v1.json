{
  "id": "pygraphistry_coverage_expansion_v1",
  "description": "Coverage-focused persona scenarios to close underrepresented dimensions (analyst, social-media, connectors, generic domain, and explicit end-to-end workflows).",
  "eval_intent": "realistic_capability",
  "tags": ["pygraphistry", "coverage", "persona", "quality"],
  "cases": [
    {
      "id": "coverage_analyst_social_claim_reuse",
      "coverage": {
        "persona": "analyst",
        "domain": "social-media",
        "task_family": "shaping_viz",
        "input_level": "raw_table",
        "output_depth": "workflow"
      },
      "prompt": "An analyst is investigating coordinated social-media claim reuse. Provide one concise Python workflow from a posts table to a share-safe claim-reuse network: normalize claims, compute reuse frequency, represent users/claims as graph entities, apply risk-oriented styling, and return a non-inline share URL.",
      "checks": {
        "regex": [
          "(claim_text|claim_key|claim)",
          "(groupby\\(|value_counts\\()",
          "edges\\(",
          "\\.nodes\\(",
          "(encode_(point|edge)_color|pointColor|edgeColor|palette)",
          "plot\\(render\\s*=\\s*False\\)"
        ],
        "max_lines": 110
      }
    },
    {
      "id": "coverage_analyst_connector_triage",
      "coverage": {
        "persona": "analyst",
        "domain": "platform",
        "task_family": "connectors",
        "input_level": "conceptual",
        "output_depth": "snippet"
      },
      "prompt": "Provide a compact connector triage snippet for an analyst using Neo4j or Splunk with a dataframe fallback. Explain connector choice, shape a graph, set non-public privacy mode (private or organization), and return a non-inline URL with plot(render=False). Keep auth/privacy handling safe.",
      "checks": {
        "regex": [
          "(?i)(neo4j|splunk|connector)",
          "(?i)dataframe",
          "edges\\(",
          "(\\.nodes\\(|edges\\()",
          "privacy\\((mode\\s*=\\s*(['\\\"](private|organization)['\\\"]|[A-Za-z_][A-Za-z0-9_]*)|\\*\\*[A-Za-z_][A-Za-z0-9_]*)\\)",
          "plot\\(render\\s*=\\s*False\\)"
        ],
        "must_not_regex": [
          "username\\s*=\\s*['\\\"][^'\\\"]+['\\\"]",
          "password\\s*=\\s*['\\\"][^'\\\"]+['\\\"]",
          "personal_key_id\\s*=\\s*['\\\"][^'\\\"]+['\\\"]",
          "personal_key_secret\\s*=\\s*['\\\"][^'\\\"]+['\\\"]"
        ],
        "max_lines": 110
      },
      "oracle": {
        "enabled": true,
        "min_score": 0.8,
        "reference_answer": "A strong answer picks Neo4j/Splunk contextually, keeps a dataframe fallback, includes graph shaping and non-inline plotting, and explicitly addresses privacy-safe sharing/auth handling.",
        "rubric": [
          "Must include connector triage framing that distinguishes Neo4j and Splunk or explains a connector choice.",
          "Must include a dataframe fallback path.",
          "Must include graph shaping and a non-inline plot output pattern.",
          "Must explicitly include privacy-safe handling (private/organization mode, redaction, or clear safe-sharing equivalent)."
        ],
        "required_concepts": [
          "connector choice rationale",
          "dataframe fallback",
          "privacy-safe sharing/auth handling"
        ]
      }
    },
    {
      "id": "coverage_generic_end_to_end_workflow",
      "coverage": {
        "persona": "analyst",
        "domain": "generic",
        "task_family": "ingest_etl",
        "input_level": "raw_table",
        "output_depth": "e2e_workflow"
      },
      "prompt": "For a non-fraud, non-cyber operations dataset, provide an end-to-end Python workflow from raw tabular records to a Graphistry visualization. Include pandas ingest, light ETL shaping, graph binding, one metric enrichment, and a non-inline plot URL. Keep it concise.",
      "checks": {
        "regex": [
          "pd\\.(read_csv|DataFrame)\\(",
          "edges\\(",
          "\\.nodes\\(",
          "(groupby\\(|value_counts\\(|degree)",
          "plot\\(render\\s*=\\s*False\\)"
        ],
        "max_lines": 90
      }
    }
  ]
}
